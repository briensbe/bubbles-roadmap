<div
  class="modal-overlay"
  (mousedown)="onOverlayMousedown($event)"
  (click)="handleOverlayClick($event)"
>
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Edit Project: {{ project.name }}</h3>

    <form (ngSubmit)="saveChanges()">
      <div class="form-group">
        <label for="name">Name</label>
        <input id="name" [(ngModel)]="editedProject.name" name="name" required />
      </div>

      <div class="form-group">
        <label for="service">Service</label>
        <select id="service" [(ngModel)]="editedProject.service" name="service" required>
          @for (service of serviceOptions; track service) {
          <option [value]="service">{{ service }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="startDate">Start Date</label>
        <!-- We use the DatePipe to format the Date object for the input value -->
        <input
          id="startDate"
          type="date"
          [ngModel]="editedProject.startDate | date : 'yyyy-MM-dd'"
          (ngModelChange)="updateStartDate($event)"
          name="startDate"
          required
        />
      </div>

      <div class="form-group slider-group">
        <label for="value"
          >Value (Business Points): {{ editedProject.value }} /
          {{ CONFIG.MAX_BUSINESS_VALUE }}</label
        >
        <input
          id="value"
          type="range"
          [(ngModel)]="editedProject.value"
          name="value"
          min="0"
          max="{{ CONFIG.MAX_BUSINESS_VALUE }}"
          required
        />
      </div>

      <div class="form-group slider-group">
        <label for="complexity"
          >Complexity (Story Points): {{ editedProject.complexity }} /
          {{ CONFIG.MAX_COMPLEXITY }}</label
        >

        <input
          id="complexity"
          type="range"
          [(ngModel)]="editedProject.complexity"
          name="complexity"
          min="0"
          max="{{ CONFIG.MAX_COMPLEXITY }}"
          required
        />
      </div>

      <div class="complexity-presets">
        @for (preset of complexityPresets; track preset.label) {
        <button
          type="button"
          class="preset-badge"
          [class.active]="editedProject.complexity === preset.value"
          (click)="setComplexity(preset.value)"
        >
          {{ preset.label }}
        </button>
        }
      </div>

      <div class="form-actions">
        <button type="button" (click)="cancel()">Cancel</button>
        <button type="submit">Save Changes</button>
      </div>
    </form>
  </div>
</div>
